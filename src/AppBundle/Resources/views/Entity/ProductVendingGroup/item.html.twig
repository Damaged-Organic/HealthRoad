{# AppBundle/Resources/views/Entity/ProductVendingGroup/item.html.twig #}
{% extends 'AppBundle:Dashboard:layout.html.twig' %}

{% block content %}
    {% block data %}{% endblock %}

    {% if is_granted(constant('AppBundle\\Security\\Authorization\\Voter\\ProductVendingGroupVoter::PRODUCT_VENDING_GROUP_DELETE'), productVendingGroup) %}
        <p>
            <a href="{{ path('product_vending_group_delete', { 'id': productVendingGroup.id }) }}">Удалить</a>
        </p>
    {% endif %}

    <p>-------------------------------------------------------------------------------------------------</p>
    {% if is_granted(constant('AppBundle\\Security\\Authorization\\Voter\\ProductVendingGroupVoter::PRODUCT_VENDING_GROUP_BIND'), productVendingGroup) %}
        <p>
            <a href="{{ path('product_choose', { 'objectClass': class(productVendingGroup)|lower, 'objectId': productVendingGroup.id }) }}">@ Привязать продукт</a>
        </p>
    {% endif %}

    <p>Продукты:</p>
    <p>-------------------------------------------------------------------------------------------------</p>
    {% if productVendingGroup.products %}
        {{ render(controller('AppBundle:Binding/Product:show', { 'objectClass': class(productVendingGroup)|lower, 'objectId': productVendingGroup.id })) }}
    {% endif %}

    <p>-------------------------------------------------------------------------------------------------</p>
    {% if is_granted(constant('AppBundle\\Security\\Authorization\\Voter\\ProductVendingGroupVoter::PRODUCT_VENDING_GROUP_BIND'), productVendingGroup) %}
        <p>
            <a href="{{ path('vending_machine_choose', { 'objectClass': class(productVendingGroup)|lower, 'objectId': productVendingGroup.id }) }}">@ Привязать торговый автомат</a>
        </p>
    {% endif %}

    <p>Торговые автоматы:</p>
    <p>-------------------------------------------------------------------------------------------------</p>
    {% if productVendingGroup.vendingMachines %}
        {{ render(controller('AppBundle:Binding/VendingMachine:show', { 'objectClass': class(productVendingGroup)|lower, 'objectId': productVendingGroup.id })) }}
    {% endif %}
{% endblock %}